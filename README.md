# Задание на курсовую работу
---

1. Анализ предметной области. Постановка задачи.

    1.1. Описание предметной области и функции решаемых задач.

    1.2. Перечень входных данных.

    1.3. Перечень выходных данных

    1.4. Ограничения предметной области (если таковые имеются).

    1.5. Взаимодействие с другими программами.

3. Инфологическая (концептуальная) модель базы данных.

    2.1. Выделение информационных объектов.

    2.2. Определение атрибутов объектов.

    2.3. Определение отношений и мощности отношений между объектами.

    2.4. Построение концептуальной модели.

4. Логическая структура БД.

5. Физическая структура базы данных.

6. Реализация проекта в среде конкретной СУБД.

    5.1. Создание таблиц.

    5.2. Создание запросов.

    5.3. Разработка интерфейса.

    5.4. Назначение прав доступа.

    5.5. Создание индексов.

    5.6. Разработка стратегии резервного копирования базы данных


   [мине](https://www.bibliofond.ru/view.aspx?id=863432)
   [мине2](https://github.com/Evgeny121231/Bush_Kyrsova)
[мине2](https://gist.github.com/Jekins/2bf2d0638163f1294637)
   # Содержание
---
## Описание предметной области 
Эта база данных предназначена для управления информацией в системе, которая обслуживает клиентов, заказы, сотрудников и услуги. Она используется для эффективного хранения данных и управления процессами в компании, которая предоставляет различные услуги своим клиентам. Система включает в себя несколько ключевых компонентов, таких как клиенты, заказы, сотрудники и услуги, а также механизмы управления ими.
## Функции решаемых задач
Создание базы данных для фотоцентра может включать множество различных функций и задач. Вот несколько ключевых функций, которые могут быть реализованы в базе данных фотоцентра:
1. Управление клиентами

    Регистрация клиентов: Возможность добавления новых клиентов с их контактной информацией.
    Обновление информации о клиентах: Изменение контактных данных, адресов и т.д.
    Просмотр истории заказов: Клиенты могут видеть свои предыдущие заказы и статусы.

2. Управление заказами

    Создание заказов: Возможность оформления новых заказов на фотосъемку, печать фотографий и т.д.
    Обновление статуса заказа: Изменение статуса заказа (например, "в обработке", "завершен", "отменен").
    Отслеживание сроков выполнения: Указание сроков выполнения заказов и уведомление клиентов о готовности.

3. Управление услугами

    Добавление и обновление услуг: Возможность добавления новых услуг (например, фотосъемка, печать, ретушь) и их изменения.
    Ценовая политика: Установка цен на различные услуги и акции.

4. Управление персоналом

    Регистрация сотрудников: Добавление сотрудников с их ролями и контактной информацией.
    Управление рабочими графиками: Учет рабочего времени сотрудников и распределение задач.

   
## Перечень входных данных
1. Данные о клиентах: Фамилия, имя, email, телефон, адрес, дата регистрации.
2. Данные о сотрудниках: Фамилия, имя, email, телефон, должность, роль (например, администратор).
3. Данные о заказах: Дата заказа, сумма, клиент, сотрудник, услуги.
4. Данные об услугах: Название услуги, описание, стоимость.

## Перечень выходных данных
1. Список клиентов: Имя, фамилия, контактные данные, количество заказов.
2. Список сотрудников: Имя, фамилия, должность, количество обработанных заказов.
4. Список заказов: Дата, клиент, сотрудник, статус, сумма.
5. Отчеты по услугам: Количество заказанных услуг, доход от каждой услуги.
      
## Ограничения предметной области

1. Ограничения на сущности:
    - Клиенты: Каждый клиент должен иметь уникальный идентификатор (например, номер телефона или email). Не допускается наличие двух клиентов с одинаковыми контактными данными.
    - Заказы: Каждый заказ должен быть связан с конкретным клиентом и содержать уникальный номер заказа. Не допускается создание заказа без указания клиента.
    - Фотографии: Каждая фотография должна иметь уникальный идентификатор и быть связана с конкретным заказом.

2. Ограничения на атрибуты:
    - Дата заказа: Дата заказа не может быть в будущем.
    - Статус заказа: Статус заказа должен принимать только определенные значения (например, "в обработке", "завершен", "отменен").
    - Формат фотографий: Форматы фотографий должны соответствовать заранее определенному списку (например, JPEG, PNG).

3. Ограничения на связи:
    - Связь между клиентами и заказами: Один клиент может иметь несколько заказов, но каждый заказ должен принадлежать только одному клиенту (отношение "один ко многим").
    - Связь между заказами и фотографиями: Один заказ может включать несколько фотографий, но каждая фотография должна принадлежать только одному заказу.

4. Ограничения на бизнес-правила:
    - Оплата: Заказ должен быть оплачен до его выполнения. Не допускается выполнение заказа без подтверждения оплаты.
    - Сроки выполнения: Срок выполнения заказа должен быть заранее определен и не может превышать установленный лимит (например, 14 дней).

5. Ограничения на целостность данных:
    - Ссылочная целостность: Не допускается удаление клиента, если у него есть активные заказы. Аналогично, не допускается удаление заказа, если он содержит фотографии.
    - Проверка уникальности: Необходимо обеспечить уникальность определенных атрибутов, таких как email клиента или номер заказа.

## Взаимодействие с другими программами
Система должна интегрироваться с:

- Электронной почтой для отправки уведомлений о новых заказах, статусах заказов и других оповещений.
- Системами платежей для получения информации о статусах оплат.
- Системами отчетности и аналитики, для формирования графиков и таблиц.

# Инфологическая (концептуальная) модель базы данных.
## Выделение информационных объектов и определение атрибутов.
Описание свойств таблицы «Заказ» 
| Имя поля | Ключевое поле | Тип данных | Обязательное поле |
|----------|---------------|------------|-------------------|
| id заказа | да            | Числовой   |  да               |
| id клиента | нет        | Числовой      | да |
| id услуги | нет        | Числовой      | да |
| Статус | нет | Текстовый | Да | 
| Дата |Нет |Дата/время |Да |

Описание свойств таблицы «Клиент»
| Имя поля | Ключевое поле | Тип данных | Обязательное поле |
|---------|---------|--------|---------------|
| id клиента | Да | Числовой | Да |
| ФИО | Нет | Текстовый | Да |
| e=mail | Нет | Текстовый | Да |
| Телефон | Нет | Числовой | Да |

Описание свойств таблицы «Сотрудник»
| Имя поля | Ключевое поле | Тип данных | Обязательное поле |
|------------|-----------|----------|--------------|
|id сотрудника |Да |Числовой |Да |
|ФИО |Нет |Текстовый |Да |
| e=mail | Нет | Текстовый | Да |
| Телефон | Нет | Числовой | Да |

Описание свойств таблицы «Услуги» 
| Имя поля | Ключевое поле | Тип данных | Обязательное поле |
|------------|-----------|----------|--------------|
|id услуги |Да |Числовой |Да |
|Вид |Нет |Текстовый |Да |
|Цена |Нет |Денежный |Да |

## Определение отношений и мощности отношений между объектами.
![image](https://github.com/user-attachments/assets/892d5796-94e3-4f1e-8657-37b8dc1cbec5)
## Построение концептуальной модели.
![image](https://github.com/user-attachments/assets/17d38073-16ac-457a-8504-b2ecc05255db)
# Логическая структура БД.
![image](https://github.com/user-attachments/assets/6d38225a-6af6-4a8b-9348-3239d3a92308)

## Создание таблиц
CREATE TABLE klienti
(
    id_kli int PRIMARY KEY not null,
    familia CHARACTER VARYING(50) not null,
    ima CHARACTER VARYING(50) not null,
    otchestvo CHARACTER VARYING(50) not null,
    email CHARACTER VARYING(50) not null,
    phone CHARACTER VARYING(20) not null
);
CREATE TABLE zakazi
(
    id_zakaza int PRIMARY KEY not null,
	foreign key id_ycl int not null,
    foreign key id_kli int not null,
	foreign key id_sotrydnika int not null, 
    datee date not null,
    status CHARACTER VARYING(50) not null
   
);
CREATE TABLE sotrydniki
(
    id_sotrydnika int PRIMARY KEY not null,
    familia CHARACTER VARYING(50) not null,
    ima CHARACTER VARYING(50) not null,
    otchestvo CHARACTER VARYING(50) not null,
    datee date not null,
    email CHARACTER VARYING(50) not null,
    phone CHARACTER VARYING(20) not null
);
CREATE TABLE yclygi
(
    id_ycl int PRIMARY KEY not null,
    price money not null,
    name CHARACTER VARYING(50) not null
);
CREATE TABLE user
(
    id int PRIMARY KEY not null,
    username  CHARACTER VARYING(50) not null,
    email CHARACTER VARYING(100) not null,
    password_hash CHARACTER VARYING(200),
    ia_admin bool
);

## Создание запросов
Получить всех пользователей из базы данных
SELECT * FROM users;

Добавить нового пользователя 
INSERT INTO users (username, email, password_hash, is_admin) 
VALUES ('new_user', 'new_user@example.com', 'hashed_password', FALSE);

Удалить пользователя
DELETE FROM users
WHERE id = 1;  -- Замените 1 на фактический ID пользователя

Получить все заказы и информацию о клиентах
SELECT o.*, c.first_name, c.last_name 
FROM orders o
JOIN clients c ON o.client_id = c.id;

Добавить новый заказ
INSERT INTO orders (client_id, employee_id, order_date, total_amount)
VALUES (1, 2, CURRENT_DATE, 100.00);  -- Замените client_id и employee_id на реальные ID

Получить всех сотрудников, являющихся администраторами
SELECT * FROM employees
WHERE is_admin = TRUE;

Получить все предоставляемые услуги
SELECT * FROM services;

Удалить услугу
DELETE FROM services
WHERE service_id = 1;  -- Замените на фактический ID услуги

## Разработка интерфейса.

## Назначение прав доступа.

## Создание индексов.

## Разработка стратегии резервного копирования базы данных
